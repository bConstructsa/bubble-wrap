# TODO: replace with global properties
global:
    areas:
        - &scene1      '#eee'                   # map background, water
        - &water1      [0.83, 0.83, 0.83]       # water
        - &water2      [.75,.75,.75]            # playa
        - &water1_o    '#9dc3de'                # water stroke
        - &water2_o    '#9dc3de'                # water stroke 2
        - &earth1      '#666'                   # land color
        - &earth1_r    '#666'                   # land color road
        - &earth2      '#e9e4e0'                # urban
        - &earth2_v    false                    # urban
        - &earth2_e    '#b3b3b3'                # urban early
        - &earth2_e2   '#b3b3b3'                # urban early fade in
        - &earth2_e3   '#bbbbbb'                # urban early fade in 3
        - &earth2_ev   true                     # urban early visibility
        - &green1      [0.140,0.843,0.824]      # park
        - &green1_r    [0.140,0.843,0.824]      # roads in parks
        - &green1_b    '#94d8d6'                # buildings in parks
        - &green1_bo   '#7fc3c1'                # buildings in parks, outlines
        - &green1_w    '#b7d7bf'                # wilderness area
        - &green1_ws   '#aed0b6'                # wilderness area stroke
        - &green1b     [0.80,0.80,0.80]         # park
        - &green2      [0.547,0.760,0.590]      # cemetery
        - &green2_r    [0.7,0.7,0.7]            # cemetery road
        - &green3      [0.000,0.779,0.328]      # golf course
        - &green4      '#526054'                # farm faint
        - &green4_v    false                    # farm faint
        - &green5      '#5a695c'                # farm
        - &green6      '#648560'                # nature reserve
        - &green7      [0.169,0.651,0.631]      # forest
        - &green8      [0.123,0.770,0.587]      # conservation
        - &green9      '#cfe3d4'                # forest (landcover)
        - &green9_e    '#cfe3d4'                # forest (landcover) early
        - &green9_v    true                     # forest (landcover) visibility
        - &green10     '#c7d4c0'                # sports_centre
        - &green11     '#d8ddd0'                # minor zoo related AOIs
        - &green11_o   '#aec7b5'                # minor zoo related AOIs outline
        - &orange1     '#bfb08e'                # stadium
        - &orange2     '#d8ccb0'                # pitch (play field)
        - &orange3     '#b9a597'                # racetrack (play field)
        - &brown1      [0.814,0.692,0.570]      # university
        - &brown1_r    [0.814,0.692,0.570]      # roads in university
        - &brown1_b    [.65, .65, .65]          # university buildings
        - &brown1_bo   [.8, .8, .8]             # university building outlines
        - &brown2      '#ada497'                # school
        - &brown3      '#c7b7a2'                # playground
        - &red1        [0.840,0.503,0.541]      # hospital
        - &red1_r      [0.840,0.503,0.541]      # roads in hospital
        - &red1_b      [.65, .65, .65]          # hospital buildings
        - &red1_bo     [.8, .8, .8]             # hospital building outlines
        - &grey1       '#717171'                # pedestrian, retail, airport apron, parking, church
        - &grey1_e     '#cac6c4'                # pedestrian, retail, airport apron, parking, church early zoom 14
        - &grey1_v     true                     # pedestrian, retail, airport apron, parking, church
        - &grey2       [0.5, 0.5, 0.5]          # airport runway
        - &grey3       grey                     # railway
        - &grey4       '#ffc52a'                # airport taxiway
        - &grey5       '#ffc52a'                # airport taxiway
        - &grey6       '#c6c6c6'                # industrial
        - &grey6_b     [.65, .65, .65]          # industrial buildings
        - &grey6_bo    [.8, .8, .8]             # industrial building outlines
        - &grey7       '#ecebe9'                # pedestrian, match minor road / path color
        - &grey7_v     true                     # pedestrian visibility
        - &grey8       '#ecebe9'                # winter sports
        - &grey8_v     true                     # winter sports visibility
        - &grey9       [.7, .0, .0, 0.5]        #[.7, .7, .7]        # transit platform
        - &grey9_o     [.5, .5, .5]             # transit platform outline
        - &grey9_v     true                     # transit platform visibility
        - &grey10      '#d4cce6'                # generic major landuse (theme park, resort, aquarium, winery)
        - &grey10_o    '#bcb9c5'                # generic major landuse outline
        - &grey11      '#d7d7d7'                # generic minor landuse (attraction, artwork)
        - &grey11_o    '#cccccc'                # generic minor landuse outline
        - &grey12      '#cfcfcf'                # generic minor amusements (roller coasters, rides, slide, carousel)
        - &grey12_o    '#c5c5c5'                # generic minor amusements
        - &purple      '#f0e1e1'                # airport
        - &purple_v    false                    # airport
        - &purple_b    '#c2c3c4'                # airport buildings
        - &purple_bo   '#969798'                # airport buildings outline
        - &mystry1     '#bfb08e'                # recreation ground
        - &yellow1     '#e7eda8'                # beach
        - &building1   [0.784, 0.784, 0.784]    # building
        - &building2   [.860, .860, .860]       # building stroke
        - &building_o  5                        # building stroke order
        - &building_e  true                     # building stroke order

layers:
    landuse:
        data: { source: osm }
        draw:
            dots2:
                order: function() { return feature.sort_key; }
                visible: false
            dots-rev:
                order: function() { return feature.sort_key; }
                visible: false
            polygons:
                order: function() { return feature.sort_key; }
        tier1:
            filter:
                any:
                    # limit show smaller landuse areas to higher zooms
                    - { $zoom: { min: 3 },  area: { min: 300000000 } }
                    - { $zoom: { min: 4 },  area: { min: 300000000 } }
                    - { $zoom: { min: 5 },  area: { min: 150000000 } }
                    - { $zoom: { min: 6 },  area: { min: 150000000 } }
                    - { $zoom: { min: 7 },  area: { min: 100000000 } }
                    - { $zoom: { min: 8 },  area: { min: 10000000 } }
                    - { $zoom: { min: 9 },  area: { min: 5000000 } }
                    - { $zoom: { min: 10 }, area: { min: 1000000 } }
                    - { $zoom: { min: 11 }, area: { min: 500000 } }
                    - { $zoom: { min: 12 }, area: { min: 500000 } }
                    - { $zoom: { min: 13 }, area: { min: 100000 } }
                    - { $zoom: { min: 14 }, area: { min: 50000 } }
                    - { $zoom: { min: 15 }, area: { min: 20000 } }
                    - { $zoom: { min: 15 }, area: { min: 2000 } }
                    - { $zoom: { min: 16 } }
            national_park:
                filter: { kind: [national_park, "park or protected land"], not: { operator: [ "United States Forest Service", "US Forest Service", "U.S. Forest Service", "USDA Forest Service" ] } }
                draw:
                    dots2:
                        color: [[4,[0.655,0.800,0.796]],[8,[0.588,0.780,0.773]]]
                        # todo: what is this?
                        order: 18
                        visible: true
                us_national_park:
                    # yosemite national park, death valley national park, grand canyon national park
                    filter: { operator: [ "United States National Park Service", "US National Park Service" ] }
                    draw:
                        dots2:
                            color: [[4,[0.525,0.765,0.686]],[9,[0.416,0.737,0.631]]]
                            order: 19
                            visible: true
                            # color: [[4,[0.242,0.737,0.712]],[12,[0.224,0.682,0.659]]]
        tier2:
            filter:
                any:
                    # limit show smaller landuse areas to higher zooms
                    - { $zoom: { min: 4 },  area: { min: 1000000000 } }
                    - { $zoom: { min: 5 },  area: { min: 1000000000 } }
                    - { $zoom: { min: 6 },  area: { min: 150000000 } }
                    - { $zoom: { min: 7 },  area: { min: 100000000 } }
                    - { $zoom: { min: 8 },  area: { min: 10000000 } }
                    - { $zoom: { min: 9 },  area: { min: 5000000 } }
                    - { $zoom: { min: 10 }, area: { min: 1000000 } }
                    - { $zoom: { min: 11 }, area: { min: 500000 } }
                    - { $zoom: { min: 12 }, area: { min: 250000 } }
                    - { $zoom: { min: 13 }, area: { min: 100000 } }
                    - { $zoom: { min: 14 }, area: { min: 50000 } }
                    - { $zoom: { min: 15 }, area: { min: 20000 } }
                    - { $zoom: { min: 15 }, area: { min: 2000 } }
                    - { $zoom: { min: 16 } }
            conservation:
                filter:
                    kind: [conservation, protected_area, nature_reserve]
                    $zoom: { min: 4 }
                draw:
                    dots2:
                        color: [0.420,0.808,0.698]
                        visible: true
                wilderness-areas:
                    filter: function() { return feature.name && feature.name.indexOf("Wilderness") > -1 }
                    draw:
                        dots2:
                            order: 25
                            color: [0.027,0.804,0.494]
                            visible: true

                national_forest_level_6:
                    filter: { protect_class: ["6",6] }
                    draw:
                        dots2:
                            color: [0.442,0.960,0.865] #*green7
                            visible: true

            # gotta be a protected area to draw green, not just a landcover type
            farm:
                filter:
                    kind: [farm, farmland]
                    $zoom: { min: 10}
                draw:
                    dots2:
                        color: [0.600,0.790,0.714]
                        visible: *green4_v
            forest:
                filter: { kind: [forest,wood], $zoom: { min: 6 } }
                national-forest:
                    filter:
                        operator: [ "United States Forest Service", "US Forest Service", "U.S. Forest Service", "USDA Forest Service" ]
                    draw:
                        dots2:
                            color: *green7
                            visible: true

                landuse-forest:
                    filter:
                        not: { operator: [ "United States Forest Service", "US Forest Service", "U.S. Forest Service", "USDA Forest Service" ] }
                        $zoom: { min: 10 }
                    draw:
                        dots2:
                            color: [0.486,0.839,0.722]
                            visible: true

            nature_reserve:
                filter: { kind: nature_reserve, $zoom: { min: 7 } }
                draw:
                    dots2:
                        color: [0.596,0.788,0.624]
                        visible: true
                wilderness-areas:
                    filter: function() { return feature.name && feature.name.indexOf("Wilderness") > -1 }
                    draw:
                        dots2:
                            color: *green7
                            visible: true

            parks-and-national-forests-not-national-park:
                filter: { $zoom: { min: 4 }, kind: [park, national_park, "park or protected land"], not: { operator: [ "United States National Park Service", "US National Park Service" ] } }
                # default for national forests and more?
                draw:
                    dots2:
                        # color: [[4,[0.655,0.800,0.796]],[11,[0.588,0.780,0.773]],[12,[0.242,0.737,0.712]],[14,[0.412,0.733,0.718]],[15,[0.635,0.792,0.788]]]
                        color: [[4,[0.655,0.800,0.796]],[11,[0.588,0.780,0.773]],[12,[0.635,0.792,0.788]]]
                        visible: true
            urban:
                filter: { kind: [urban, rural, residential] }
                visible: *earth2_v
                draw:
                    dots2:
                        color: [[0,*earth2],[9,*earth2]]
                        visible: *earth2_v
        tier3:
            filter:
                any:
                    # limit show smaller landuse areas to higher zooms
                    - { $zoom: { min: 8 },  area: { min: 10000000 } }
                    - { $zoom: { min: 9 },  area: { min: 5000000 } }
                    - { $zoom: { min: 10 }, area: { min: 1000000 } }
                    - { $zoom: { min: 11 }, area: { min: 500000 } }
                    - { $zoom: { min: 12 }, area: { min: 500000 } }
                    - { $zoom: { min: 13 }, area: { min: 100000 } }
                    - { $zoom: { min: 14 }, area: { min: 50000 } }
                    - { $zoom: { min: 15 }, area: { min: 20000 } }
                    - { $zoom: { min: 15 }, area: { min: 2000 } }
                    - { $zoom: { min: 16 } }
            airport:
                filter:
                    kind: aerodrome
                draw:
                    dots2:
                        color: [0.805,0.805,0.825]
                        visible: *purple_v
            military:
                filter:
                    kind: military
                draw:
                    dots2:
                        color: [0.722,0.769,0.827]
                        visible: true
            university:
                filter:
                    kind: [university, college]
                draw:
                    dots2:
                        color: [0.827,0.753,0.682]
                        visible: true
        tier4:
            filter:
                any:
                    # limit show smaller landuse areas to higher zooms
                    - { $zoom: { min: 10 }, area: { min: 1000000 } }
                    - { $zoom: { min: 11 }, area: { min: 500000 } }
                    - { $zoom: { min: 12 }, area: { min: 500000 } }
                    - { $zoom: { min: 13 }, area: { min: 100000 } }
                    - { $zoom: { min: 14 }, area: { min: 50000 } }
                    - { $zoom: { min: 15 }, area: { min: 20000 } }
                    - { $zoom: { min: 15 }, area: { min: 2000 } }
                    - { $zoom: { min: 16 } }
            cemetery:
                filter:
                    kind: cemetery
                draw:
                    dots2:
                        color: *green2
                        visible: true
            commercial:
                filter:
                    kind: commercial
                draw:
                    dots2:
                        color: [0.855,0.748,0.667]
                        visible: *grey1_v
            golf_course:
                filter:
                    kind: golf_course
                draw:
                    dots2:
                        color: [0.353,0.812,0.545]
                        visible: true
            hospital:
                filter:
                    kind: hospital
                draw:
                    dots2:
                        color: [0.843,0.624,0.647]
                        visible: true
            industrial:
                filter:
                    kind: industrial
                draw:
                    dots-rev:
                        color: [[8,[0.845,0.845,0.845]],[14,[0.835,0.835,0.835]],[15,[0.780,0.780,0.780]]]
                        visible: true
            power:
                filter: { kind: [plant, generator, substation] }
                draw:
                    dots2:
                        color: [0.679,0.679,0.679]
                        visible: true
            railway:
                filter:
                    kind: railway
                draw:
                    dots-rev:
                        color: [0.898,0.910,0.918]
                        visible: true
            sports_centre:
                filter:
                    kind: sports_centre
                draw:
                    dots2:
                        color: *green10
            recreation_ground:
                filter:
                    kind: recreation_ground
                draw:
                    dots2:
                        color: *green1
                        visible: true
            retail:
                filter:
                    kind: retail
                draw:
                    dots2:
                        color: [0.955,0.752,0.650]
                        visible: *grey1_v
            stadium:
                filter:
                    kind: stadium
                draw:
                    dots2:
                        color: [0.624,0.690,0.761]
                        visible: true
            zoo:
                filter:
                    kind: [zoo, wildlife_park]
                draw:
                    dots2:
                        color: [0.498,1.000,0.851]
                        visible: true
            winter_sports:
                filter:
                    kind: winter_sports
                draw:
                    dots2:
                        color: *grey8
                        visible: *grey8_v
            man-made:
                filter: { kind: [pier,wastewater_plant,works,bridge,tower,breakwater,water_works,groyne,dike,cutline] }
                draw:
                    dots2:
                        color: [0.690,0.690,0.690]
                        visible: true
                pier:
                    filter: { kind: [pier,bridge,breakwater,groyne,dike,cutline] }
                    draw:
                        dots2:
                            color: [0.679,0.679,0.679]
                            visible: true
        tier5:
            filter:
                any:
                    # limit show smaller landuse areas to higher zooms
                    - { $zoom: { min: 10 }, area: { min: 1000000 } }
                    - { $zoom: { min: 11 }, area: { min: 400000 } }
                    - { $zoom: { min: 12 }, area: { min: 200000 } }
                    - { $zoom: { min: 13 }, area: { min: 50000 } }
                    - { $zoom: { min: 14 }, area: { min: 20000 } }
                    - { $zoom: { min: 15 }, area: { min: 10000 } }
                    - { $zoom: { min: 15 }, area: { min: 2000 } }
                    - { $zoom: { min: 16 } }
                all:
                    - kind:
                        - theme_park
                        - resort
                        - aquarium
                        - winery
                        - maze
                        - beach
            tourism-related:
                filter:
                    kind:
                        - theme_park
                        - resort
                        - aquarium
                        - winery
                        - maze
                draw:
                    dots2:
                        color: *grey10
                        visible: true
            beach:
                filter:
                    kind: beach
                draw:
                    dots2:
                        color: [0.780,0.740,0.538]
                        visible: true
        tier6:
            filter:
                any:
                    # limit show smaller landuse areas to higher zooms
                    - { $zoom: { min: 12 }, area: { min: 500000 } }
                    - { $zoom: { min: 13 }, area: { min: 100000 } }
                    - { $zoom: { min: 14 }, area: { min: 50000 } }
                    - { $zoom: { min: 15 }, area: { min: 20000 } }
                    - { $zoom: { min: 15 }, area: { min: 2000 } }
                    - { $zoom: { min: 16 } }
            garden:
                filter:
                    kind: garden
                draw:
                    dots2:
                        color: [0.604,0.973,0.722]
                        visible: true
            parking:
                filter:
                    all:
                        - kind: parking
                        - $zoom: { min: 14 }
                    any:
                        - { $zoom: { min: 14 }, area: { min: 10000 } }
                        - { $zoom: { min: 15 }, area: { min: 5000 } }
                draw:
                    dots2:
                        color: [0.765,0.765,0.765]
                        visible: *grey1_v
                early:
                    filter: { $zoom: { max: 15 } }
                    draw:
                        dots2:
                            color: *grey1_e
                            visible: true
            pedestrian:
                filter:
                    kind: [pedestrian,common]
                draw:
                    dots2:
                        color: [0.740,0.740,0.740]
                        visible: *grey1_v
                green-stuff:
                    filter:
                        surface: [grass]
                    draw:
                        dots2:
                            color: [0.584,0.843,0.792]
            pitch:
                filter: { kind: pitch }
                draw:
                    dots2:
                        color: [0.490,0.812,0.631]
                        visible: true
            place_of_worship:
                filter:
                    kind: place_of_worship
                draw:
                    dots2:
                        color: [0.910,0.972,1.000]
                        visible: *grey1_v
            playground:
                filter:
                    kind: playground
                draw:
                    dots-rev:
                        color: [0.584,0.843,0.792]
                        visible: true
            school:
                filter:
                    kind: school
                draw:
                    dots2:
                        color: [0.749,0.722,0.694]
                        visible: true
            minor-landuse:
                filter:
                    kind:
                        - attraction
                        - artwork
                        - wilderness_hut
                        - hanami
                draw:
                    dots2:
                        color: [0.765,0.765,0.765]
                        visible: true

    landuse-not-filtered:
        data: { source: osm, layer: landuse }
        # runways and taxiways are also in the roads layer as lines
        # these ones are probably duplicate features, but have AREA (a good thing)
        filter:
            kind:
                - runway
                - apron
                - beach
                - roller_coaster
                - amusement_ride
                - summer_toboggan
                - trail_riding_station
                - water_slide
                - carousel
                - animal
                - enclosure
                - petting_zoo
                - aviary
        draw:
            dots2:
                order: function() { return feature.sort_key; }
                visible: false
            dots-rev:
                order: function() { return feature.sort_key; }
                visible: false
            polygons:
                visible: false
                order: function() { return feature.sort_key; }
        runway:
            filter:
                kind: runway
            draw:
                polygons:
                    visible: true
                    color: [[10,[0.4,0.4,0.4]],[11,[0.50,0.50,0.50]],[12,[0.7,0.7,0.7]],[13,[0.75,0.75,0.75]],[14,[0.95,0.95,0.95]]]
        apron:
            filter:
                kind: apron
                $zoom: { min: 15}
            draw:
                dots-rev:
                    visible: true
                    color: [0.820,0.820,0.820]
        minor-amusement-park-landuse:
            filter:
                kind:
                    - roller_coaster
                    - amusement_ride
                    - summer_toboggan
                    - trail_riding_station
                    - water_slide
                    - carousel
            draw:
                dots2:
                    color: *grey12
                    visible: true
        minor-zoo-landuse:
            filter:
                kind:
                    - animal
                    - enclosure
                    - petting_zoo
                    - aviary
            draw:
                dots2:
                    color: *green11
                    visible: true
    landuse_urban_area-early:
        data: { source: osm, layer: landuse }
        filter:
            # This is from Natural Earth and only shows up from zoom(0,9)
            kind: ['urban area']
        draw:
            dots2:
                visible: *earth2_ev
                order: function() { return feature.sort_key; }
                color: [[4,[0.965,0.600,0.882]],[6,[0.965,0.600,0.882]],[7,[0.882,0.639,0.827]],[8,[0.757,0.729,0.753]]]

